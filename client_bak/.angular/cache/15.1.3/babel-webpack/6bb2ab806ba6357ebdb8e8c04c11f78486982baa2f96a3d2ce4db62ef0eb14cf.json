{"ast":null,"code":"import { Subject, firstValueFrom } from 'rxjs';\nimport { HttpParams } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nconst BACKEND = 'http://localhost:7000';\nexport class BGGService {\n  constructor(http) {\n    this.http = http;\n    this.onSearchResults = new Subject();\n    this.onSearchQuery = new Subject();\n  }\n  searchGameByName(name) {\n    this.onSearchQuery.next(name);\n    const params = new HttpParams().set('name', name);\n    return firstValueFrom(this.http.get(`${BACKEND}/api/games`, {\n      params\n    })).then(results => {\n      this.onSearchResults.next(results);\n      return results;\n    });\n  }\n}\nBGGService.ɵfac = function BGGService_Factory(t) {\n  return new (t || BGGService)(i0.ɵɵinject(i1.HttpClient));\n};\nBGGService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: BGGService,\n  factory: BGGService.ɵfac\n});","map":{"version":3,"mappings":"AACA,SAASA,OAAO,EAAEC,cAAc,QAAQ,MAAM;AAE9C,SAAqBC,UAAU,QAAQ,sBAAsB;;;AAE7D,MAAMC,OAAO,GAAG,uBAAuB;AAGvC,OAAM,MAAOC,UAAU;EAIrBC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;IAHxB,oBAAe,GAAG,IAAIN,OAAO,EAAU;IACvC,kBAAa,GAAG,IAAIA,OAAO,EAAU;EAEE;EAEvCO,gBAAgB,CAACC,IAAY;IAC3B,IAAI,CAACC,aAAa,CAACC,IAAI,CAACF,IAAI,CAAC;IAC7B,MAAMG,MAAM,GAAG,IAAIT,UAAU,EAAE,CAACU,GAAG,CAAC,MAAM,EAAEJ,IAAI,CAAC;IACjD,OAAOP,cAAc,CACnB,IAAI,CAACK,IAAI,CAACO,GAAG,CAAS,GAAGV,OAAO,YAAY,EAAE;MAAEQ;IAAM,CAAE,CAAC,CAC1D,CAACG,IAAI,CAAEC,OAAO,IAAI;MACjB,IAAI,CAACC,eAAe,CAACN,IAAI,CAACK,OAAO,CAAC;MAClC,OAAOA,OAAO;IAChB,CAAC,CAAC;EACJ;;AAfWX,UAAU;mBAAVA,UAAU;AAAA;AAAVA,UAAU;SAAVA,UAAU;EAAAa,SAAVb,UAAU;AAAA","names":["Subject","firstValueFrom","HttpParams","BACKEND","BGGService","constructor","http","searchGameByName","name","onSearchQuery","next","params","set","get","then","results","onSearchResults","factory"],"sourceRoot":"","sources":["C:\\Users\\junyu\\VTTPPAFNov2022-main\\day35\\client\\src\\app\\bgg.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Subject, firstValueFrom } from 'rxjs';\r\nimport { Game } from './models';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\n\r\nconst BACKEND = 'http://localhost:7000';\r\n\r\n@Injectable()\r\nexport class BGGService {\r\n  onSearchResults = new Subject<Game[]>();\r\n  onSearchQuery = new Subject<string>();\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  searchGameByName(name: string): Promise<Game[]> {\r\n    this.onSearchQuery.next(name);\r\n    const params = new HttpParams().set('name', name);\r\n    return firstValueFrom(\r\n      this.http.get<Game[]>(`${BACKEND}/api/games`, { params })\r\n    ).then((results) => {\r\n      this.onSearchResults.next(results);\r\n      return results;\r\n    });\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}